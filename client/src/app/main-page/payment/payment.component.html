<form #paymentForm="ngForm" (ngSubmit)="onSend()" [hidden]="submitted" class="mt-2">
    <div class="mb-3">
        <label for="sener" class="form-label">Sending IBAN</label>
        <select id="sender" class="form-select" (change)="senderChanged($event.target)">
            <option *ngFor="let account of accounts" [value]="account.iban">{{account.iban}} ({{account.balance}}
                {{account.currency}})</option>
        </select>
    </div>

    <div class="mb-3">
        <label for="account" class="form-label">Receiving IBAN</label>
        <input type="text" name="account" id="account" #account="ngModel" class="form-control" required
            [(ngModel)]="receivingIban" (change)="receiverChanged()">
        <div class="form-text">IBAN of the receiving account</div>
        <div class="alert alert-danger" [hidden]="receivingAccount === undefined || receivingAccount !== null">Account
            doesn't exist
        </div>
        <div class="alert alert-info" *ngIf="receivingAccount">
            Money will be sent to {{receivingAccount.owner}} in currency {{receivingAccount.currency}}
        </div>
    </div>

    <div class="mb-3">
        <label for="amount">Amount</label>
        <div class="input-group">
            <input type="number" name="amount" id="amount" class="form-control" value="0" [(ngModel)]="amount" min="0"
                [max]="currentAccount?.balance ?? 0">
            <span class="input-group-text">{{currentAccount?.currency}}</span>
        </div>
    </div>

    <div class="mb-3 d-flex justify-content-center">
        <button type="submit" class="btn btn-primary"
            [disabled]="!(paymentForm.form.valid && receivingAccount)">Send</button>
    </div>
</form>

<div [hidden]="!submitted" class="mt-2">
    <div class="alert alert-success">
        Money transfered successfully
    </div>
    <button class="btn btn-primary" (click)="reload()">Return to payment</button>
</div>